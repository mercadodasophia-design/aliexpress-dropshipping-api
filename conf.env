from flask import Flask, request, jsonify
from flask_cors import CORS
import os
from dotenv import load_dotenv
import sys
import traceback

# Adicionar o path da biblioteca oficial
sys.path.append('../exemplos/python-aliexpress-api-main')

# Carregar variáveis de ambiente
load_dotenv('./config.env')

app = Flask(__name__)
CORS(app)

# Configurações AliExpress
APP_KEY = os.getenv('ALIEXPRESS_APP_KEY')
APP_SECRET = os.getenv('ALIEXPRESS_APP_SECRET')

# Inicializar API AliExpress
try:
    from aliexpress_api import AliexpressApi, models
    aliexpress = AliexpressApi(
        key=APP_KEY,
        secret=APP_SECRET,
        language=models.Language.PT,
        currency=models.Currency.BRL
    )
    print("✅ API AliExpress inicializada com sucesso!")
except Exception as e:
    print(f"❌ Erro ao inicializar API AliExpress: {e}")
    aliexpress = None

# ... resto do código permanece igual ...
